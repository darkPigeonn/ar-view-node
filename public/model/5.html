<!DOCTYPE html>
<html>

<head>
  <title>Embarvi</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <!-- <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script> -->
  <script src="https://cdn.jsdelivr.net/gh/jeromeetienne/AR.js/aframe/build/aframe-ar.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../style.css">
  <script src="https://kit.fontawesome.com/94c81be855.js" crossorigin="anonymous"></script>

</head>

<body>
  <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false; trackingMethod: best; stabilizationEnabled: true;">
    <a-assets>
      <a-asset-item id="tree" src="../3d/siklus1.glb"></a-asset-item>
    </a-assets>
    <!-- Scene sebagai referensi posisi -->
    <a-entity position="0 0 0" id="sceneRef">
      <!-- Entitas untuk model -->
      <a-entity id="treeModel" gltf-model="#tree" rotation="0 0 0" scale="1 1 1" position="0 1 -5"></a-entity>
    </a-entity>

  </a-scene>
  <!-- Control Buttons -->
  <div id="controls">
    <button onclick="scaleUp()" class="circle-icon">
      <i class="fa fa-search-plus"></i> </button>
    <button onclick="scaleDown()" class="circle-icon"><i class="fa fa-search-minus"></i> </button>
    <button onclick="rotateUp()" class="circle-icon"><i class="fa-solid fa-arrows-rotate"></i></i></button>
    <button onclick="rotateRight()" class="circle-icon"><i class="fa fa-rotate-right"></i></button>
    <button onclick="rotateLeft()" class="circle-icon"><i class="fa fa-rotate-left"></i></button>




  </div>
  <div class="controls">
    <div>
      <button class="circle-icon" onclick="toggleAudio()">
        <i class="fa fa-play"></i>
      </button>
    </div>
    <div id="progressBar">
      <div class="progress" style="width: 0%;"></div>
    </div>
    <div>
      <button class="circle-icon" onclick="showPopup()">
        <i class="fa fa-book"></i>
      </button>
    </div>
  </div>
  <div id="popupContainer" class="popup-container">
    <div class="popup-content">
      <p class="popup-label">Deskripsi</p>
      <div class="button-row">
        <button class="circle-icon" onclick="toggleAudio()">
          <i class="fa fa-play"></i>
        </button>
        <button class="circle-icon" onclick="hidePopup()">
          <i class="fa fa-close"></i>
        </button>
      </div>
    </div>
    <div class="popup-detail">
      <p class="detail-text" style="text-align: justify;"><span style="">&nbsp; &nbsp; &nbsp; Siklus
          litik merupakan siklus
          dimana puncak reproduksinya virus akan menyebabkan sel inang menjadi mati atau mengalami litik (pecah)
          sehingga melepaskan fag-fag yang dihasilkan dalam sel inang. Virus melakukan replikasi baik siklus litik
          maupun siklus lisogenik tergantung pada virulensi atau ketahanan sel inang terhadap virus penginfeksi. Apabila
          sel inang memiliki ketahanan yang lemah maka virus dapat melakukan siklus litik. Sebaliknya, apabila sel inang
          memiliki ketahanan yang tinggi maka virus melakukan siklus lisogenik. Berikut tapahan siklus litik pada
          bakteriofag antara lain:&nbsp;</span></p>
      <ol>
        <li style="list-style-type: decimal; ">
          <p class="detail-text" style="text-align: justify;">Tahapan penempelan (adsorpsi)&nbsp;<br> &nbsp; &nbsp;
            &nbsp;Virus akan
            menempel menggunakan serabut ekor dengan ikatan khusus antara kapsid protein virus dengan daerah
            reseptor&nbsp;<em>(reseptor site/spot)&nbsp;</em>pada permukaan sel inang. Ikatan khusus inilah yang membuat
            virus hanya dapat menempel pada inang tertentu, apabila tidak cocok maka virus tidak dapat menempel.</p>
        </li>
      </ol>
      <p style="text-align: justify;"></p>
      <ol start="2">
        <li style="list-style-type: decimal; ">
          <p class="detail-text" style="text-align: justify;">Tahapan penetrasi<br> &nbsp; &nbsp; &nbsp; Pada tahapan
            ini, virus mulai
            memasukan DNA atau RNA yang terkandung di dalamnya, sedangkan selubung protein dari asam nukleat yang
            disebut kapsid akan tetap berada di luar sel. Setelah semua sel genetik berhasil masuk ke dalam sel inang,
            maka kapsid akan terlepas dari sel karena sudah tidak berguna bagi virus.</p>
        </li>
      </ol>
      <p style="text-align: justify;"></p>
      <ol start="3">
        <li style="list-style-type: decimal; ">
          <p class="detail-text" style="text-align: justify;">Tahapan sintesis<br>&nbsp; &nbsp; &nbsp; &nbsp;Setelah
            berhasil menginjeksi
            asam nukleat, bakteriofage akan menghasilkan enzim untuk menghentikan sintesis molekul bakteri (protein,
            DNA, RNA). Setelah sintesis protein dan asam nukleat dari sel inang berhenti, virus akan mengambil alih
            proses metabolisme sel inang. DNA dan RNA dari sel inang kemudian akan dimanfaatkan dalam pengadaan asam
            nukleat virus sebanyak mungkin. Selain itu, virus akan menggunakan protein yang terdapat pada sel inang
            untuk kemudian dimanfaatkan sebagai pengganda kapsid.</p>
        </li>
      </ol>
      <p style="text-align: justify;"></p>
      <ol start="4">
        <li style="list-style-type: decimal; ">
          <p class="detail-text" style="text-align: justify;">Tahapan perakitan<br> &nbsp; &nbsp; &nbsp;Pada tahapan
            ini, virus akan
            membentuk tubuh mereka menjadi kepala, ekor, dan serabut ekor. Kapsid yang telah terbentuk pada tahapan
            sintesis akan mulai diisi dengan asam nukleat yang telah tereplikasi sehingga menjadi virus yang utuh.</p>
        </li>
      </ol>
      <p style="text-align: justify;"></p>
      <ol start="5">
        <li style="list-style-type: decimal; ">
          <p class="detail-text" style="text-align: justify;">Tahapan litik (lisis)<br>&nbsp; &nbsp; &nbsp;Virus-virus
            baru yang sempurna
            telah terbentuk, maka induk virus akan mengeluarkan enzim lisozim sebagai penghancur sel inang dan
            memungkinkan cairan masuk. Sel mengembang dan akhirnya pecah dengan melepaskan 100 sampai 200 virus baru.
            Virus tersebut akan mencari sel lain untuk kemudian melanjutkan siklus hidup mereka.</p>
        </li>
      </ol>
      <p style="text-align: justify;"></p>
      <p><br></p>
    </div>
  </div>

  <!-- Audio Element -->
  <audio id="audio" src="../sound/5.m4a"></audio>
  <script>
    document.querySelector('a-scene').setAttribute('embedded', {
      aspectRatio: window.innerWidth / window.innerHeight
    });
    var audio = document.getElementById('audio');
    var progressBar = document.getElementById('progressBar');
    var progress = document.querySelector('.progress');
    var currentTime = document.getElementById('currentTime');
    var duration = document.getElementById('duration');
    var isPlaying = false;

    // Mengatur durasi audio saat tersedia
    audio.onloadedmetadata = function () {
      duration.textContent = formatTime(audio.duration);
    };

    // Memainkan atau menghentikan audio
    function toggleAudio() {
      if (isPlaying) {
        audio.pause();
      } else {
        audio.play();
      }
      isPlaying = !isPlaying;
    }

    function showPopup() {
      var popup = document.getElementById("popupContainer");
      popup.classList.toggle("active");
    }

    function hidePopup() {
      var popup = document.getElementById("popupContainer");
      popup.classList.remove("active");
    }
    // Mengupdate posisi dan tampilan bilah progres
    audio.addEventListener('timeupdate', function () {
      var percentage = (audio.currentTime / audio.duration) * 100;
      progress.style.width = percentage + '%';
      currentTime.textContent = formatTime(audio.currentTime);
    });

    // Mengubah waktu audio saat mengklik bilah progres
    progressBar.addEventListener('click', function (e) {
      var boundingRect = progressBar.getBoundingClientRect();
      var percentage = (e.clientX - boundingRect.left) / boundingRect.width;
      var newTime = percentage * audio.duration;
      audio.currentTime = newTime;
    });

    // Fungsi untuk memformat waktu dalam format MM:SS
    function formatTime(time) {
      var minutes = Math.floor(time / 60);
      var seconds = Math.floor(time % 60);
      if (seconds < 10) {
        seconds = '0' + seconds;
      }
      return minutes + ':' + seconds;
    }

    // Fungsi-fungsi kontrol model (telah disertakan pada kode sebelumnya)
    function scaleUp() {
      var model = document.getElementById('treeModel');
      var scale = model.getAttribute('scale');
      scale.x += 0.1;
      scale.y += 0.1;
      scale.z += 0.1;
      model.setAttribute('scale', scale);
    }

    function scaleDown() {
      var model = document.getElementById('treeModel');
      var scale = model.getAttribute('scale');
      scale.x -= 0.1;
      scale.y -= 0.1;
      scale.z -= 0.1;
      model.setAttribute('scale', scale);
    }

    function rotateRight() {
      var model = document.getElementById('treeModel');
      var rotation = model.getAttribute('rotation');
      rotation.z -= 5;
      model.setAttribute('rotation', rotation);
    }

    function rotateLeft() {
      var model = document.getElementById('treeModel');
      var rotation = model.getAttribute('rotation');
      rotation.z += 5;
      model.setAttribute('rotation', rotation);
    }

    function rotateUp() {
      var model = document.getElementById('treeModel');
      var rotation = model.getAttribute('rotation');
      rotation.y += 50;
      model.setAttribute('rotation', rotation);
    }

    function rotateDown() {
      var model = document.getElementById('treeModel');
      var rotation = model.getAttribute('rotation');
      rotation.x += 5;
      model.setAttribute('rotation', rotation);
    }
  </script>
</body>


</html>
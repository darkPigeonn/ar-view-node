<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scale and Rotate Controls with AR - Mobile Version</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>
  <style>
    /* CSS untuk mengatur tampilan pada perangkat mobile */
    body {
      margin: 0;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f0f0f0;
    }

    a-scene {
      width: 100%;
      height: 100%;
    }

    #controls {
      position: absolute;
      margin: 10px 10px;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 999;
      background-color: rgba(255, 255, 255, 0.5);
      padding: 10px;
      border-radius: 10px;
    }

    .controls {
      position: absolute;

      bottom: 0px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 999;
      background-color: rgba(255, 255, 255, 0.5);
      padding: 10px;
      border-radius: 10px;
    }

    button {
      margin: 5px;
      padding: 5px 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }

    #audioControls {
      display: flex;
      align-items: center;
      margin-top: 10px;
    }

    #progressBar {
      flex-grow: 1;
      height: 5px;
      background-color: #ccc;
      border-radius: 5px;
      margin: 0 10px;
      position: relative;
    }

    #progressBar .progress {
      height: 100%;
      background-color: #4CAF50;
      border-radius: 5px;
      position: absolute;
      top: 0;
      left: 0;
    }

    #audioControls button {
      margin: 0;
    }
  </style>
</head>

<body>
  <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
    <a-assets>
      <a-asset-item id="tree" src="3d/1.glb"></a-asset-item>
    </a-assets>

    <!-- Scene sebagai referensi posisi -->
    <a-entity position="0 0 0" id="sceneRef">
      <!-- Entitas untuk model -->
      <a-entity id="treeModel" gltf-model="#tree" rotation="0 0 0" scale="1 1 1" position="0 1 -5"></a-entity>
    </a-entity>

    <!-- Control Buttons -->
    <!-- <div id="controls">
      <button onclick="scaleUp()">Zoom In</button>
      <button onclick="scaleDown()">Zoom Out</button>
      <button onclick="rotateRight()">Putar Kanan</button>
      <button onclick="rotateLeft()">Putar Kiri</button>
      <button onclick="rotateUp()">Putar Atas</button>
      <button onclick="rotateDown()">Putar Bawah</button>

      
      <div id="audioControls">
        <button onclick="toggleAudio()">Play Sound</button>
       
        <div id="progressBar">
          <div class="progress" style="width: 0%;"></div>
        </div>
      </div>

    </div> -->
    <div class="controls">
      <div>Tombol</div>
    </div>

    <!-- Audio Element -->
    <audio id="audio" src="sound/1.mp3"></audio>
  </a-scene>

  <script>
    var audio = document.getElementById('audio');
    var progressBar = document.getElementById('progressBar');
    var progress = document.querySelector('.progress');
    var currentTime = document.getElementById('currentTime');
    var duration = document.getElementById('duration');
    var isPlaying = false;

    // Mengatur durasi audio saat tersedia
    audio.onloadedmetadata = function () {
      duration.textContent = formatTime(audio.duration);
    };

    // Memainkan atau menghentikan audio
    function toggleAudio() {
      if (isPlaying) {
        audio.pause();
      } else {
        audio.play();
      }
      isPlaying = !isPlaying;
    }

    // Mengupdate posisi dan tampilan bilah progres
    audio.addEventListener('timeupdate', function () {
      var percentage = (audio.currentTime / audio.duration) * 100;
      progress.style.width = percentage + '%';
      currentTime.textContent = formatTime(audio.currentTime);
    });

    // Mengubah waktu audio saat mengklik bilah progres
    progressBar.addEventListener('click', function (e) {
      var boundingRect = progressBar.getBoundingClientRect();
      var percentage = (e.clientX - boundingRect.left) / boundingRect.width;
      var newTime = percentage * audio.duration;
      audio.currentTime = newTime;
    });

    // Fungsi untuk memformat waktu dalam format MM:SS
    function formatTime(time) {
      var minutes = Math.floor(time / 60);
      var seconds = Math.floor(time % 60);
      if (seconds < 10) {
        seconds = '0' + seconds;
      }
      return minutes + ':' + seconds;
    }

    // Fungsi-fungsi kontrol model (telah disertakan pada kode sebelumnya)
    function scaleUp() {
      var model = document.getElementById('treeModel');
      var scale = model.getAttribute('scale');
      scale.x += 0.1;
      scale.y += 0.1;
      scale.z += 0.1;
      model.setAttribute('scale', scale);
    }

    function scaleDown() {
      var model = document.getElementById('treeModel');
      var scale = model.getAttribute('scale');
      scale.x -= 0.1;
      scale.y -= 0.1;
      scale.z -= 0.1;
      model.setAttribute('scale', scale);
    }

    function rotateRight() {
      var model = document.getElementById('treeModel');
      var rotation = model.getAttribute('rotation');
      rotation.y -= 5;
      model.setAttribute('rotation', rotation);
    }

    function rotateLeft() {
      var model = document.getElementById('treeModel');
      var rotation = model.getAttribute('rotation');
      rotation.y += 5;
      model.setAttribute('rotation', rotation);
    }

    function rotateUp() {
      var model = document.getElementById('treeModel');
      var rotation = model.getAttribute('rotation');
      rotation.x -= 5;
      model.setAttribute('rotation', rotation);
    }

    function rotateDown() {
      var model = document.getElementById('treeModel');
      var rotation = model.getAttribute('rotation');
      rotation.x += 5;
      model.setAttribute('rotation', rotation);
    }
  </script>
</body>

</html>